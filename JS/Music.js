const Party_songs = [
    {
        id: 1,
        imageSrc: 'Songs/Party/Badtameez-Dil.jpg',
        name: 'Badtameez Dil',
        timestamp: '4:13',
        link: 'Songs/Party/Badtameez-Dil.mp3'
    },
    {
        id: 2,
        imageSrc: 'Songs/Party/Kar-Gayi-Chull.jpg',
        name: 'Kar Gayi Chull',
        timestamp: '3:08',
        link: 'Songs/Party/Kar-Gayi-Chull.mp3'
    },
    {
        id: 3,
        imageSrc: 'Songs/Party/Abhi-Toh-Party-Shuru-Hui-Ha.jpg',
        name: 'Abhi Toh Party Shuru Hui Hai',
        timestamp: '3:00',
        link: 'Songs/Party/Abhi-Toh-Party-Shuru-Hui-Ha.mp3'
    },
    {
        id: 4,
        imageSrc: 'Songs/Party/Party-All-Night.jpg',
        name: 'Party All Night',
        timestamp: '4:43',
        link: 'Songs/Party/Party-All-Night.mp3'
    },
    {
        id: 5,
        imageSrc: 'Songs/Party/Gallan-Goodiyaan.jpg',
        name: 'Gallan Goodiyaan',
        timestamp: '4:57',
        link: 'Songs/Party/Gallan-Goodiyaan.mp3'
    },
    {
        id: 6,
        imageSrc: 'Songs/Party/Dilliwaali-Girlfriend.jpg',
        name: 'Dilliwaali Girlfriend',
        timestamp: '4:21',
        link: 'Songs/Party/Dilliwaali-Girlfriend.mp3'
    },
    {
        id: 7,
        imageSrc: 'Songs/Party/Dhating-Naach.jpg',
        name: 'Dhating Naach',
        timestamp: '3:11',
        link: 'Songs/Party/Dhating-Naach.mp3'
    },
    {
        id: 8,
        imageSrc: 'Songs/Party/Chammak-Challo.jpg',
        name: 'ChammakChallo',
        timestamp: '3:58',
        link: 'Songs/Party/Chammak-Challo.mp3'
    },
    {
        id: 9,
        imageSrc: 'Songs/Party/Bang-Bang.jpg',
        name: 'Bang Bang',
        timestamp: '5:20',
        link: 'Songs/Party/Bang-Bang.mp3'
    },
    {
        id: 10,
        imageSrc: 'Songs/Party/Aankh-Marey.jpg',
        name: 'Aankh Marey',
        timestamp: '3:33',
        link: 'Songs/Party/Aankh-Marey.mp3'
    },
];

const Sad_songs = [
    {
        id: 1,
        imageSrc: 'Songs/Tum-Hi-Ho.jpg',
        name: 'Tum Hi Ho',
        timestamp: '4:22',
        link: 'Songs/Tum-Hi-Ho.mp3'
    },
    {
        id: 2,
        imageSrc: 'Songs/Kabira.jpg',
        name: 'Kabira',
        timestamp: '3:55',
        link: 'Songs/Kabira.mp3'
    },
    {
        id: 3,
        imageSrc: 'Songs/Tujhe-Bhula-Diya.jpg',
        name: 'Tujhe Bhula Diya',
        timestamp: '6:05',
        link: 'Songs/Tujhe-Bhula-Diya.mp3'
    },
    {
        id: 4,
        imageSrc: 'Songs/Hasi.jpg',
        name: 'Hasi',
        timestamp: '4:22',
        link: 'Songs/Hasi.mp3'
    },
    {
        id: 5,
        imageSrc: 'Songs/Kyun.jpg',
        name: 'Kyun',
        timestamp: '5:36',
        link: 'Songs/Kyun.mp3'
    },
    {
        id: 6,
        imageSrc: 'Songs/Channa-Mereya.jpg',
        name: 'Channa Mereya',
        timestamp: '4:49',
        link: 'Songs/Channa-Mereya.mp3'
    },
    {
        id: 7,
        imageSrc: 'Songs/Tum-Se-Hi.jpg',
        name: 'Tum Se Hi',
        timestamp: '5:07',
        link: 'Songs/Tum-Se-Hi.mp3'
    },
    {
        id: 8,
        imageSrc: 'Songs/Tu-Jo-Mila.jpg',
        name: 'Tu Jo Mila',
        timestamp: '4:18',
        link: 'Songs/Tu-Jo-Mila.mp3'
    },
    {
        id: 9,
        imageSrc: 'Songs/Agar-Tum-Sath-Ho.jpg',
        name: 'Agar Tum Sath Ho',
        timestamp: '5:41',
        link: 'Songs/Agar-Tum-Sath-Ho.mp3'
    },
    {
        id: 10,
        imageSrc: 'Songs/Ae-Dil-Hai-Mushkil.jpg',
        name: 'Ae Dil Hai Mushkil',
        timestamp: '4:29',
        link: 'Songs/Ae-Dil-Hai-Mushkil.mp3'
    },
];

const Romantic_songs = [
    {
        id: 1,
        imageSrc: 'Songs/Romantic/Tum-Hi-Ho.jpg',
        name: 'Tum Hi Ho',
        timestamp: '4:21',
        link: 'Songs/Romantic/Tum-Hi-Ho.mp3'
    },
    {
        id: 2,
        imageSrc: 'Songs/Romantic/Tum-Se-Hi.jpg',
        name: 'Tum Se Hi',
        timestamp: '5:21',
        link: 'Songs/Romantic/Tum-Se-Hi.mp3'
    },
    {
        id: 3,
        imageSrc: 'Songs/Romantic/Tera-Ban-Jaunga.jpg',
        name: 'Tera Ban Jaunga',
        timestamp: '3:56',
        link: 'Songs/Romantic/Tera-Ban-Jaunga.mp3'
    },
    {
        id: 4,
        imageSrc: 'Songs/Romantic/Gerua.jpg',
        name: 'Gerua',
        timestamp: '5:45',
        link: 'Songs/Romantic/Gerua.mp3'
    },
    {
        id: 5,
        imageSrc: 'Songs/Romantic/Enna-Sona.jpg',
        name: 'Enna Sona',
        timestamp: '3:33',
        link: 'Songs/Romantic/Enna-Sona.mp3'
    },
    {
        id: 6,
        imageSrc: 'Songs/Romantic/Tujh-Mein-Rab-Dikhta-Hai.jpg',
        name: 'Tujh Mein Rab Dikhta Hai',
        timestamp: '4:41',
        link: 'Songs/Romantic/Tujh-Mein-Rab-Dikhta-Hai.mp3'
    },
    {
        id: 7,
        imageSrc: 'Songs/Romantic/Dil-Deewana.jpg',
        name: 'Dil Deewana',
        timestamp: '5:54',
        link: 'Songs/Romantic/Dil-Deewana.mp3'
    },
    {
        id: 8,
        imageSrc: 'Songs/Romantic/Moh-Moh-Ke-Dhaage.jpg',
        name: 'Moh Moh Ke Dhaage',
        timestamp: '5:22',
        link: 'Songs/Romantic/Moh-Moh-Ke-Dhaage.mp3'
    },
    {
        id: 9,
        imageSrc: 'Songs/Romantic/Janam-Janam.jpg',
        name: 'Janam Janam',
        timestamp: '3:57',
        link: 'Songs/Romantic/Janam-Janam.mp3'
    },
    {
        id: 10,
        imageSrc: 'Songs/Romantic/Sanam-Re.jpg',
        name: 'Sanam Re',
        timestamp: '5:08',
        link: 'Songs/Romantic/Sanam-Re.mp3'
    },
];

const Motivational_songs = [
    {
        id: 1,
        imageSrc: 'Songs/Zinda-Hoon-Yaaron.jpg',
        name: 'Zinda Hoon Yaaron',
        timestamp: '5:01',
        link: 'Songs/Zinda-Hoon-Yaaron.mp3'
    },
    {
        id: 2,
        imageSrc: 'Songs/Chak-De-India.jpg',
        name: 'Chak De India',
        timestamp: '4:45',
        link: 'Songs/Chak-De-India.mp3'
    },
    {
        id: 3,
        imageSrc: 'Songs/Ruk-Ja-O-Dil-Deewane.jpg',
        name: 'Ruk Ja O Dil Deewane',
        timestamp: '5:18',
        link: 'Songs/Ruk-Ja-O-Dil-Deewane.mp3'
    },
    {
        id: 4,
        imageSrc: 'Songs/Aashayein.jpg',
        name: 'Aashayein',
        timestamp: '5:11',
        link: 'Songs/Aashayein.mp3'
    },
    {
        id: 5,
        imageSrc: 'Songs/Aashiqi-Aage-Badhaye.jpg',
        name: 'Aashiqi Aage Badhaye',
        timestamp: '6:24',
        link: 'Songs/Aashiqi-Aage-Badhaye.mp3'
    },
    {
        id: 6,
        imageSrc: 'Songs/Chala-Jata-Hoon.jpg',
        name: 'Chala Jata Hoon',
        timestamp: '5:37',
        link: 'Songs/Chala-Jata-Hoon.mp3'
    },
    {
        id: 7,
        imageSrc: 'Songs/Aaj-Phir-Jeene-Ki-Tamanna-Hai.jpg',
        name: 'Aaj Phir Jeene Ki Tamanna Hai',
        timestamp: '5:01',
        link: 'Songs/Aaj-Phir-Jeene-Ki-Tamanna-Hai.mp3'
    },
    {
        id: 8,
        imageSrc: 'Songs/Ziddi-Dil.jpg',
        name: 'Ziddi Dil',
        timestamp: '3:45',
        link: 'Songs/Ziddi-Dil.mp3'
    },
    {
        id: 9,
        imageSrc: 'Songs/Kandhon-Se-Milte-Hain-Kandhe.jpg',
        name: 'Kandhon Se Milte Hain Kandhe',
        timestamp: '4:54',
        link: 'Songs/Kandhon-Se-Milte-Hain-Kandhe.mp3'
    },
    {
        id: 10,
        imageSrc: 'Songs/Yu-Hi-Chala-Chal.jpg',
        name: 'Yu Hi Chala Chal',
        timestamp: '6:13',
        link: 'Songs/Yu-Hi-Chala-Chal.mp3'
    },
];

const Classical_songs = [
    {
        id: 1,
        imageSrc: 'Songs/Lag-Jaa-Gale.jpg',
        name: 'Lag Jaa Gale',
        timestamp: '4:16',
        link: 'Songs/Lag-Jaa-Gale.mp3'
    },
    {
        id: 2,
        imageSrc: 'Songs/Aayega-Aanewala.jpg',
        name: 'Aayega Aanewala',
        timestamp: '5:36',
        link: 'Songs/Aayega-Aanewala.mp3'
    },
    {
        id: 3,
        imageSrc: 'Songs/Awaara-Hoon.jpg',
        name: 'Awaara Hoon',
        timestamp: '4:32',
        link: 'Songs/Awaara-Hoon.mp3'
    },
    {
        id: 4,
        imageSrc: 'Songs/Jaane-Kya-Tune-Kahi.jpg',
        name: 'Jaane Kya Tune Kahi',
        timestamp: '4:39',
        link: 'Songs/Jaane-Kya-Tune-Kahi.mp3'
    },
    {
        id: 5,
        imageSrc: 'Songs/Piya-To-Se-Naina-Lage-Re.jpg',
        name: 'Piya To Se Naina Lage Re',
        timestamp: '6:07',
        link: 'Songs/Piya-To-Se-Naina-Lage-Re.mp3'
    },
    {
        id: 6,
        imageSrc: 'Songs/Man-Re-Tu-Kahe-Na-Dheer-Dharea.jpg',
        name: 'Man Re Tu Kahe Na Dheer Dharea',
        timestamp: '4:14',
        link: 'Songs/Man-Re-Tu-Kahe-Na-Dheer-Dharea.mp3'
    },
    {
        id: 7,
        imageSrc: 'Songs/Tere-Bina-Zindagi-Se.jpg',
        name: 'Tere Bina Zindagi Se',
        timestamp: '5:36',
        link: 'Songs/Tere-Bina-Zindagi-Se.mp3'
    },
    {
        id: 8,
        imageSrc: 'Songs/Apni-To-Har-Aah-Ek-Toofan-Hai.jpg',
        name: 'Apni To Har Aah Ek Toofan Hai',
        timestamp: '4:22',
        link: 'Songs/Apni-To-Har-Aah-Ek-Toofan-Hai.mp3'
    },
    {
        id: 9,
        imageSrc: 'Songs/Chaudhvin-Ka-Chand-Ho.jpg',
        name: 'Chaudhvin Ka Chand Ho',
        timestamp: '4:35',
        link: 'Songs/Chaudhvin-Ka-Chand-Ho.mp3'
    },
    {
        id: 10,
        imageSrc: 'Songs/Pyar-Hua-Ikrar-Hua.jpg',
        name: 'Pyar Hua Ikrar Hua',
        timestamp: '4:58',
        link: 'Songs/Pyar-Hua-Ikrar-Hua.mp3'
    },
];

let songIndex = 1;
let audioElement = new Audio('Songs/Party/Badtameez-Dil.mp3');
let Masterplay = document.getElementById("Masterplay");
let MyProgressBar = document.getElementById("SongProgress");
let songtime = document.getElementById('currenttime');
let CurrentList = Party_songs;

function populateSongslist(genrePlaylist) {
    const SongslistDiv = document.querySelector('.Songslist');
    SongslistDiv.innerHTML = '';

    genrePlaylist.forEach(song => {
        const songDiv = document.createElement('div');
        songDiv.classList.add('song');
        songDiv.id = song.id;

        const image = document.createElement('img');
        image.src = song.imageSrc;
        songDiv.appendChild(image);

        const name = document.createElement('h2');
        name.textContent = song.name;
        songDiv.appendChild(name);

        const timestamp = document.createElement('p');
        timestamp.textContent = song.timestamp + ' sec';
        songDiv.appendChild(timestamp);

        const button = document.createElement('button');

        const leftArrowSpan = document.createElement('span');
        leftArrowSpan.textContent = '<';
        leftArrowSpan.classList.add('arrow', 'small-txt', 'Neon_text');

        const buttonTextSpan = document.createElement('span');
        buttonTextSpan.textContent = 'Play';
        buttonTextSpan.classList.add('button-text', 'small-txt', 'Neon_text');

        const rightArrowSpan = document.createElement('span');
        rightArrowSpan.textContent = '>';
        rightArrowSpan.classList.add('arrow', 'small-txt', 'Neon_text');

        button.appendChild(leftArrowSpan);
        button.appendChild(buttonTextSpan);
        button.appendChild(rightArrowSpan);

        songDiv.appendChild(button);

        SongslistDiv.appendChild(songDiv);

        songDiv.addEventListener('click', (e) => {
            CurrentList = genrePlaylist;
            const songNumber = e.currentTarget.id;
            songIndex = parseInt(songNumber);

            updateUIForCurrentSong(CurrentList);
        });
    });
}

function formatTime(durationInSeconds) {
    let minutes = Math.floor(durationInSeconds / 60);
    let seconds = Math.round(durationInSeconds % 60);

    // Add leading zeros if necessary
    minutes = (minutes < 10) ? "0" + minutes : minutes;
    seconds = (seconds < 10) ? "0" + seconds : seconds;

    return minutes + ":" + seconds;
}

const MakeAllDefault = () => {
    Array.from(document.getElementsByClassName('song')).forEach((songElement) => {
        const targetButton = songElement.querySelector('.button-text');
        const targetStyle = songElement.style;
        targetButton.innerText = 'Play';
        targetStyle.backgroundColor = "rgba(255, 255, 255, 0.2)";
    });
}

function updateSong(songIndex, genrePlaylist) {
    var updatetosong = genrePlaylist[songIndex];
    let Songimage = document.getElementById("Songimage");
    let SongName = document.getElementById("SongName");
    Songimage.style.backgroundImage = "url('" + updatetosong.imageSrc + "')";
    SongName.innerHTML = '<i class="fa-solid fa-music fa-beat" style="color: #63E6BE; margin-right: 10px;"></i>' + updatetosong.name;
}

function updateUIForCurrentSong(genrePlaylist) {
    const currentSongElement = document.getElementById(songIndex);
    const targetButton = currentSongElement.querySelector('.button-text');
    const targetStyle = currentSongElement.style;

    MakeAllDefault();

    if (audioElement.currentTime <= 0 && audioElement.paused) {
        // If a new song is paused, then play the new song
        audioElement.src = genrePlaylist[songIndex - 1].link;
        audioElement.play();
        targetButton.innerText = 'Pause';
        Masterplay.classList.remove('fa-circle-play');
        Masterplay.classList.add('fa-circle-pause');
        updateSong(songIndex - 1, CurrentList);
    }
    else if (audioElement.paused) {
        // If the song is just paused, then resume that song
        audioElement.play();
        targetButton.innerText = 'Pause';
        Masterplay.classList.remove('fa-circle-play');
        Masterplay.classList.add('fa-circle-pause');
    }
    else {
        // If the song is playing, then pause it
        audioElement.pause();
        targetButton.innerText = 'Play';
        Masterplay.classList.remove('fa-circle-pause');
        Masterplay.classList.add('fa-circle-play');
    }
    targetStyle.backgroundColor = "rgb(208, 255, 255, 0.5)";
}

populateSongslist(CurrentList);
updateSong(songIndex - 1, CurrentList);

const listItems = document.querySelectorAll('.MoodPlaylistelements li .list');

// Add click event listener to each list item
listItems.forEach(item => {
    item.addEventListener('click', function () {
        // Remove 'active' class from all list items
        listItems.forEach(item => {
            item.classList.remove('active');
        });

        // Add 'active' class to the clicked list item
        this.classList.add('active');
    });
});

document.getElementById('partyGenreBtn').addEventListener('click', () => {
    populateSongslist(Party_songs);
});

document.getElementById('sadGenreBtn').addEventListener('click', () => {
    populateSongslist(Sad_songs);
});

document.getElementById('romanticGenreBtn').addEventListener('click', () => {
    populateSongslist(Romantic_songs);
});

document.getElementById('motivationalGenreBtn').addEventListener('click', () => {
    populateSongslist(Motivational_songs);
});

document.getElementById('classicalGenreBtn').addEventListener('click', () => {
    populateSongslist(Classical_songs);
});

// add event Listners
Masterplay.addEventListener('click', () => {
    updateUIForCurrentSong(CurrentList);
})

audioElement.addEventListener('timeupdate', () => {
    progress = parseFloat((audioElement.currentTime / audioElement.duration) * 100).toFixed(2);

    MyProgressBar.value = progress;
    let time = formatTime(audioElement.duration * (progress / 100));
    songtime.innerText = time + ' sec';
})

MyProgressBar.addEventListener('change', () => {
    audioElement.currentTime = ((MyProgressBar.value * audioElement.duration) / 100);
})

document.getElementById('next').addEventListener('click', () => {
    if (songIndex < 10) {
        songIndex += 1;
    } else {
        songIndex = 1;
    }
    audioElement.pause();
    audioElement.currentTime = 0;
    updateUIForCurrentSong(CurrentList);

});

document.getElementById('previous').addEventListener('click', () => {
    if (songIndex > 1) {
        songIndex -= 1;
    } else {
        songIndex = 10;
    }

    audioElement.pause();
    audioElement.currentTime = 0;
    updateUIForCurrentSong(CurrentList);
});

audioElement.addEventListener('ended', () => {
    if (songIndex < 10) {
        songIndex += 1;
    } else {
        songIndex = 1;
    }

    audioElement.pause();
    audioElement.currentTime = 0;
    updateUIForCurrentSong(CurrentList);
});
